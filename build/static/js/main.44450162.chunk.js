(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n.n(r),u=n(5),i=n(9),a=n(8),o=n(2),s=n(4),d=n.n(s),j="api/persons",l={getAll:function(){return d.a.get(j).then((function(e){return e.data}))},create:function(e){return d.a.post(j,e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return d.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),f=function(e){var t=e.persons,n=e.setPersons,r=e.filter,c=Object(a.a)(t).filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())}));return Object(b.jsx)("ul",{children:c.map((function(e){return Object(b.jsxs)("li",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(){return function(e){if(window.confirm("Delete ".concat(e.name," ?"))){var r=Object(a.a)(t);l.remove(e.id).then(n(r.filter((function(t){return t.id!==e.id}))))}}(e)},children:" remove "})]},e.id)}))})},h=function(e){var t=e.filter,n=e.setFilter;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{onChange:function(e){return n(e.target.value)},value:t})]})},m=function(e){var t=e.persons,n=e.setPersons,r=e.newName,c=e.setNewName,u=e.newNumber,a=e.setNewNumber;return Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(r)){var o=t.find((function(e){return e.name===r}));o&&o.number!==u&&window.confirm("".concat(o.name," is already added to the phonebook, replace the old number with the new one?"))&&function(e){var r=Object(i.a)(Object(i.a)({},e),{},{number:u});l.update(e.id,r).then((function(e){n(t.map((function(t){return t.id!==r.id?t:e}))).catch((function(e){return window.alert(JSON.stringify(e.response.data))}))}))}(o)}else{var s={name:r,number:u};l.create(s).then((function(e){return n(t.concat(e))})).catch((function(e){return window.alert(JSON.stringify(e.response.data))})),c(""),a("")}},children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:function(e){return c(e.target.value)},value:r})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{onChange:function(e){return a(e.target.value)},value:u})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},O=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),i=Object(u.a)(c,2),a=i[0],s=i[1],d=Object(o.useState)(""),j=Object(u.a)(d,2),O=j[0],p=j[1],w=Object(o.useState)(""),v=Object(u.a)(w,2),x=v[0],N=v[1];return Object(o.useEffect)((function(){l.getAll().then((function(e){return r(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(h,{filter:O,setFilter:p}),Object(b.jsx)("h2",{children:" Add a new"}),Object(b.jsx)(m,{persons:n,setPersons:r,newName:a,setNewName:s,newNumber:x,setNewNumber:N}),Object(b.jsx)("h2",{children:" Numbers"}),Object(b.jsx)(f,{persons:n,setPersons:r,filter:O})]})};c.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.44450162.chunk.js.map